/* Check frequency of categorical variables (Basel Event Type, Internal Events) */
proc freq data=archer_data noprint;
    tables 'Basel Event Type Level 1'n 
           'Internal Events'n 
        / missing out=cat_freq (drop=percent);
run;

/* Check if cat_freq was created */
proc sql noprint;
    select count(*) into :cat_count from cat_freq;
quit;

%put NOTE: Number of records in cat_freq = &cat_count.;

%macro check_cat_freq;
    %if &cat_count > 0 %then %do;
        proc print data=cat_freq (obs=20);
            title "Sample of Distinct Categorical Values (First 20)";
        run;
    %end;
    %else %do;
        %put WARNING: cat_freq is empty or was not created. No valid data to display.;
    %end;
%mend;

%check_cat_freq;
